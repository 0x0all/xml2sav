<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Created on December 5, 2016 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>Untitled Document</title>

<meta name="description" content="Untitled Document">
<meta name="keywords" content="Untitled Document">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.roman {font-family:serif; font-weight:normal;}
span.sansserif {font-family:sans-serif; font-weight:normal;}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="System-File-Format"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[ &lt; ]</td>
<td valign="middle" align="left">[<a href="#System-File-Record-Structure" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[ &lt;&lt; ]</td>
<td valign="middle" align="left">[ Up ]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="System-File-Format-1"></a>
<h1 class="appendix">A. System File Format</h1>

<p>A system file encapsulates a set of cases and dictionary information
that describes how they may be interpreted.  This chapter describes
the format of a system file.
</p>
<p>System files use four data types: 8-bit characters, 32-bit integers,
64-bit integers, 
and 64-bit floating points, called here <code>char</code>, <code>int32</code>,
<code>int64</code>, and
<code>flt64</code>, respectively.  Data is not necessarily aligned on a word
or double-word boundary: the long variable name record (see section <a href="#Long-Variable-Names-Record">Long Variable Names Record</a>) and very long string records (see section <a href="#Very-Long-String-Record">Very Long String Record</a>) have arbitrary byte length and can therefore cause all
data coming after them in the file to be misaligned.
</p>
<p>Integer data in system files may be big-endian or little-endian.  A
reader may detect the endianness of a system file by examining
<code>layout_code</code> in the file header record
(see <a href="#layout_005fcode"><code>layout_code</code></a>).
</p>
<p>Floating-point data in system files may nominally be in IEEE 754, IBM,
or VAX formats.  A reader may detect the floating-point format in use
by examining <code>bias</code> in the file header record
(see <a href="#bias"><code>bias</code></a>).
</p>
<p>PSPP detects big-endian and little-endian integer formats in system
files and translates as necessary.  PSPP also detects the
floating-point format in use, as well as the endianness of IEEE 754
floating-point numbers, and translates as needed.  However, only IEEE
754 numbers with the same endianness as integer data in the same file
have actually been observed in system files, and it is likely that
other formats are obsolete or were never used.
</p>
<p>System files use a few floating point values for special purposes:
</p>
<dl compact="compact">
<dt> SYSMIS</dt>
<dd><p>The system-missing value is represented by the largest possible
negative number in the floating point format (<code>-DBL_MAX</code>).
</p>
</dd>
<dt> HIGHEST</dt>
<dd><p>HIGHEST is used as the high end of a missing value range with an
unbounded maximum.  It is represented by the largest possible positive
number (<code>DBL_MAX</code>).
</p>
</dd>
<dt> LOWEST</dt>
<dd><p>LOWEST is used as the low end of a missing value range with an
unbounded minimum.  It was originally represented by the
second-largest negative number (in IEEE 754 format,
<code>0xffeffffffffffffe</code>).  System files written by SPSS 21 and later
instead use the largest negative number (<code>-DBL_MAX</code>), the same
value as SYSMIS.  This does not lead to ambiguity because LOWEST
appears in system files only in missing value ranges, which never
contain SYSMIS.
</p></dd>
</dl>

<p>System files may use most character encodings based on an 8-bit unit.
UTF-16 and UTF-32, based on wider units, appear to be unacceptable.
<code>rec_type</code> in the file header record is sufficient to distinguish
between ASCII and EBCDIC based encodings.  The best way to determine
the specific encoding in use is to consult the character encoding
record (see section <a href="#Character-Encoding-Record">Character Encoding Record</a>), if present, and failing
that the <code>character_code</code> in the machine integer info record
(see section <a href="#Machine-Integer-Info-Record">Machine Integer Info Record</a>).  The same encoding should be
used for the dictionary and the data in the file, although it is
possible to artificially synthesize files that use different encodings
(see section <a href="#Character-Encoding-Record">Character Encoding Record</a>).
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#System-File-Record-Structure">A.1 System File Record Structure</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#File-Header-Record">A.2 File Header Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Record">A.3 Variable Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Value-Labels-Records">A.4 Value Labels Records</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Document-Record">A.5 Document Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Machine-Integer-Info-Record">A.6 Machine Integer Info Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Machine-Floating_002dPoint-Info-Record">A.7 Machine Floating-Point Info Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Multiple-Response-Sets-Records">A.8 Multiple Response Sets Records</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Extra-Product-Info-Record">A.9 Extra Product Info Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Display-Parameter-Record">A.10 Variable Display Parameter Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Long-Variable-Names-Record">A.11 Long Variable Names Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Very-Long-String-Record">A.12 Very Long String Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Character-Encoding-Record">A.13 Character Encoding Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Long-String-Value-Labels-Record">A.14 Long String Value Labels Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Long-String-Missing-Values-Record">A.15 Long String Missing Values Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Data-File-and-Variable-Attributes-Records">A.16 Data File and Variable Attributes Records</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Extended-Number-of-Cases-Record">A.17 Extended Number of Cases Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Other-Informational-Records">A.18 Other Informational Records</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-Termination-Record">A.19 Dictionary Termination Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Data-Record">A.20 Data Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="System-File-Record-Structure"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#System-File-Format" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#File-Header-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="System-File-Record-Structure-1"></a>
<h2 class="section">A.1 System File Record Structure</h2>

<p>System files are divided into records with the following format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">int32               type;
char                data[];
</pre></td></tr></table>

<p>This header does not identify the length of the <code>data</code> or any
information about what it contains, so the system file reader must
understand the format of <code>data</code> based on <code>type</code>.  However,
records with type 7, called <em>extension records</em>, have a stricter
format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">int32               type;
int32               subtype;
int32               size;
int32               count;
char                data[size * count];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  This value identifies a particular kind of extension
record.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>The size of each piece of data that follows the header, in bytes.
Known extension records use 1, 4, or 8, for <code>char</code>, <code>int32</code>,
and <code>flt64</code> format data, respectively.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>The number of pieces of data that follow the header.
</p>
</dd>
<dt> <code>char data[size * count];</code></dt>
<dd><p>Data, whose format and interpretation depend on the subtype.
</p></dd>
</dl>

<p>An extension record contains exactly <code>size * count</code> bytes of
data, which allows a reader that does not understand an extension
record to skip it.  Extension records provide only nonessential
information, so this allows for files written by newer software to
preserve backward compatibility with older or less capable readers.
</p>
<p>Records in a system file must appear in the following order:
</p>
<ul>
<li>
File header record.

</li><li>
Variable records.

</li><li>
All pairs of value labels records and value label variables records,
if present.

</li><li>
Document record, if present.

</li><li>
Extension (type 7) records, in ascending numerical order of their
subtypes.

<p>System files written by SPSS include at most one of each kind of
extension record.  This is generally true of system files written by
other software as well, with known exceptions noted below in the
individual sections about each type of record.
</p>
</li><li>
Dictionary termination record.

</li><li>
Data record.
</li></ul>

<p>We advise authors of programs that read system files to tolerate
format variations.  Various kinds of misformatting and corruption have
been observed in system files written by SPSS and other software
alike.  In particular, because extension records provide nonessential
information, it is generally better to ignore an extension record
entirely than to refuse to read a system file.
</p>
<p>The following sections describe the known kinds of records.
</p>
<hr size="6">
<a name="File-Header-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#System-File-Record-Structure" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="File-Header-Record-1"></a>
<h2 class="section">A.2 File Header Record</h2>

<p>A system file begins with the file header, with the following format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">char                rec_type[4];
char                prod_name[60];
int32               layout_code;
int32               nominal_case_size;
int32               compression;
int32               weight_index;
int32               ncases;
flt64               bias;
char                creation_date[9];
char                creation_time[8];
char                file_label[64];
char                padding[3];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>char rec_type[4];</code></dt>
<dd><p>Record type code, either &lsquo;<samp>$FL2</samp>&rsquo; for system files with
uncompressed data or data compressed with simple bytecode compression,
or &lsquo;<samp>$FL3</samp>&rsquo; for system files with ZLIB compressed data.
</p>
<p>This is truly a character field that uses the character encoding as
other strings.  Thus, in a file with an ASCII-based character encoding
this field contains <code>24 46 4c 32</code> or <code>24 46 4c 33</code>, and in a
file with an EBCDIC-based encoding this field contains <code>5b c6 d3
f2</code>.  (No EBCDIC-based ZLIB-compressed files have been observed.)
</p>
</dd>
<dt> <code>char prod_name[60];</code></dt>
<dd><p>Product identification string.  This always begins with the characters
&lsquo;<samp>@(#) SPSS DATA FILE</samp>&rsquo;.  PSPP uses the remaining characters to
give its version and the operating system name; for example, &lsquo;<samp>GNU
pspp 0.1.4 - sparc-sun-solaris2.5.2</samp>&rsquo;.  The string is truncated if it
would be longer than 60 characters; otherwise it is padded on the right
with spaces.
</p>
<p><a name="layout_005fcode"></a>
</p></dd>
<dt> <code>int32 layout_code;</code></dt>
<dd><p>Normally set to 2, although a few system files have been spotted in
the wild with a value of 3 here.  PSPP use this value to determine the
file&rsquo;s integer endianness (see section <a href="#System-File-Format">System File Format</a>).
</p>
</dd>
<dt> <code>int32 nominal_case_size;</code></dt>
<dd><p>Number of data elements per case.  This is the number of variables,
except that long string variables add extra data elements (one for every
8 characters after the first 8).  However, string variables do not
contribute to this value beyond the first 255 bytes.   Further, system
files written by some systems set this value to -1.  In general, it is
unsafe for systems reading system files to rely upon this value.
</p>
</dd>
<dt> <code>int32 compression;</code></dt>
<dd><p>Set to 0 if the data in the file is not compressed, 1 if the data is
compressed with simple bytecode compression, 2 if the data is ZLIB
compressed.  This field has value 2 if and only if <code>rec_type</code> is
&lsquo;<samp>$FL3</samp>&rsquo;.
</p>
</dd>
<dt> <code>int32 weight_index;</code></dt>
<dd><p>If one of the variables in the data set is used as a weighting
variable, set to the dictionary index of that variable, plus 1
(see <a href="#Dictionary-Index">Dictionary Index</a>).  Otherwise, set to 0.
</p>
</dd>
<dt> <code>int32 ncases;</code></dt>
<dd><p>Set to the number of cases in the file if it is known, or -1 otherwise.
</p>
<p>In the general case it is not possible to determine the number of cases
that will be output to a system file at the time that the header is
written.  The way that this is dealt with is by writing the entire
system file, including the header, then seeking back to the beginning of
the file and writing just the <code>ncases</code> field.  For files in which
this is not valid, the seek operation fails.  In this case,
<code>ncases</code> remains -1.
</p>
<p><a name="bias"></a>
</p></dd>
<dt> <code>flt64 bias;</code></dt>
<dd><p>Compression bias, ordinarily set to 100.  Only integers between
<code>1 - bias</code> and <code>251 - bias</code> can be compressed.
</p>
<p>By assuming that its value is 100, PSPP uses <code>bias</code> to determine
the file&rsquo;s floating-point format and endianness (see section <a href="#System-File-Format">System File Format</a>).  If the compression bias is not 100, PSPP cannot auto-detect
the floating-point format and assumes that it is IEEE 754 format with
the same endianness as the system file&rsquo;s integers, which is correct
for all known system files.
</p>
</dd>
<dt> <code>char creation_date[9];</code></dt>
<dd><p>Date of creation of the system file, in &lsquo;<samp>dd mmm yy</samp>&rsquo;
format, with the month as standard English abbreviations, using an
initial capital letter and following with lowercase.  If the date is not
available then this field is arbitrarily set to &lsquo;<samp>01 Jan 70</samp>&rsquo;.
</p>
</dd>
<dt> <code>char creation_time[8];</code></dt>
<dd><p>Time of creation of the system file, in &lsquo;<samp>hh:mm:ss</samp>&rsquo;
format and using 24-hour time.  If the time is not available then this
field is arbitrarily set to &lsquo;<samp>00:00:00</samp>&rsquo;.
</p>
</dd>
<dt> <code>char file_label[64];</code></dt>
<dd><p>File label declared by the user, if any (see <a href="pspp.html#FILE-LABEL">(pspp)FILE LABEL</a> section &lsquo;FILE LABEL&rsquo; in <cite>PSPP Users Guide</cite>).  Padded on the right with spaces.
</p>
<p>A product that identifies itself as <code>VOXCO INTERVIEWER 4.3</code> uses
CR-only line ends in this field, rather than the more usual LF-only or
CR LF line ends.
</p>
</dd>
<dt> <code>char padding[3];</code></dt>
<dd><p>Ignored padding bytes to make the structure a multiple of 32 bits in
length.  Set to zeros.
</p></dd>
</dl>

<hr size="6">
<a name="Variable-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#File-Header-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Value-Labels-Records" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Record-1"></a>
<h2 class="section">A.3 Variable Record</h2>

<p>There must be one variable record for each numeric variable and each
string variable with width 8 bytes or less.  String variables wider
than 8 bytes have one variable record for each 8 bytes, rounding up.
The first variable record for a long string specifies the variable&rsquo;s
correct dictionary information.  Subsequent variable records for a
long string are filled with dummy information: a type of -1, no
variable label or missing values, print and write formats that are
ignored, and an empty string as name.  A few system files have been
encountered that include a variable label on dummy variable records,
so readers should take care to parse dummy variable records in the
same way as other variable records.
</p>
<p><a name="Dictionary-Index"></a>
The <em>dictionary index</em> of a variable is its offset in the set of
variable records, including dummy variable records for long string
variables.  The first variable record has a dictionary index of 0, the
second has a dictionary index of 1, and so on.
</p>
<p>The system file format does not directly support string variables
wider than 255 bytes.  Such very long string variables are represented
by a number of narrower string variables.  See section <a href="#Very-Long-String-Record">Very Long String Record</a>, for details.
</p>
<p>A system file should contain at least one variable and thus at least
one variable record, but system files have been observed in the wild
without any variables (thus, no data either).
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">int32               rec_type;
int32               type;
int32               has_var_label;
int32               n_missing_values;
int32               print;
int32               write;
char                name[8];

/* <span class="roman">Present only if <code>has_var_label</code> is 1.</span> */
int32               label_len;
char                label[];

/* <span class="roman">Present only if <code>n_missing_values</code> is nonzero</span>. */
flt64               missing_values[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type code.  Always set to 2.
</p>
</dd>
<dt> <code>int32 type;</code></dt>
<dd><p>Variable type code.  Set to 0 for a numeric variable.  For a short
string variable or the first part of a long string variable, this is set
to the width of the string.  For the second and subsequent parts of a
long string variable, set to -1, and the remaining fields in the
structure are ignored.
</p>
</dd>
<dt> <code>int32 has_var_label;</code></dt>
<dd><p>If this variable has a variable label, set to 1; otherwise, set to 0.
</p>
</dd>
<dt> <code>int32 n_missing_values;</code></dt>
<dd><p>If the variable has no missing values, set to 0.  If the variable has
one, two, or three discrete missing values, set to 1, 2, or 3,
respectively.  If the variable has a range for missing variables, set to
-2; if the variable has a range for missing variables plus a single
discrete value, set to -3.
</p>
<p>A long string variable always has the value 0 here.  A separate record
indicates missing values for long string variables (see section <a href="#Long-String-Missing-Values-Record">Long String Missing Values Record</a>).
</p>
</dd>
<dt> <code>int32 print;</code></dt>
<dd><p>Print format for this variable.  See below.
</p>
</dd>
<dt> <code>int32 write;</code></dt>
<dd><p>Write format for this variable.  See below.
</p>
</dd>
<dt> <code>char name[8];</code></dt>
<dd><p>Variable name.  The variable name must begin with a capital letter or
the at-sign (&lsquo;<samp>@</samp>&rsquo;).  Subsequent characters may also be digits, octothorpes
(&lsquo;<samp>#</samp>&rsquo;), dollar signs (&lsquo;<samp>$</samp>&rsquo;), underscores (&lsquo;<samp>_</samp>&rsquo;), or full
stops (&lsquo;<samp>.</samp>&rsquo;).  The variable name is padded on the right with spaces.
</p>
<p>The &lsquo;<samp>name</samp>&rsquo; fields should be unique within a system file.  System
files written by SPSS that contain very long string variables with
similar names sometimes contain duplicate names that are later
eliminated by resolving the very long string names (see section <a href="#Very-Long-String-Record">Very Long String Record</a>).  PSPP handles duplicates by assigning them new,
unique names.
</p>
</dd>
<dt> <code>int32 label_len;</code></dt>
<dd><p>This field is present only if <code>has_var_label</code> is set to 1.  It is
set to the length, in characters, of the variable label.  The
documented maximum length varies from 120 to 255 based on SPSS
version, but some files have been seen with longer labels.  PSPP
accepts labels of any length.
</p>
</dd>
<dt> <code>char label[];</code></dt>
<dd><p>This field is present only if <code>has_var_label</code> is set to 1.  It has
length <code>label_len</code>, rounded up to the nearest multiple of 32 bits.
The first <code>label_len</code> characters are the variable&rsquo;s variable label.
</p>
</dd>
<dt> <code>flt64 missing_values[];</code></dt>
<dd><p>This field is present only if <code>n_missing_values</code> is nonzero.  It
has the same number of 8-byte elements as the absolute value of
<code>n_missing_values</code>.  Each element is interpreted as a number for
numeric variables (with HIGHEST and LOWEST indicated as described in
the chapter introduction).  For string variables of width less than 8
bytes, elements are right-padded with spaces; for string variables
wider than 8 bytes, only the first 8 bytes of each missing value are
specified, with the remainder implicitly all spaces.
</p>
<p>For discrete missing values, each element represents one missing
value.  When a range is present, the first element denotes the minimum
value in the range, and the second element denotes the maximum value
in the range.  When a range plus a value are present, the third
element denotes the additional discrete missing value.
</p></dd>
</dl>

<p><a name="System-File-Output-Formats"></a>
The <code>print</code> and <code>write</code> members of sysfile_variable are output
formats coded into <code>int32</code> types.  The least-significant byte
of the <code>int32</code> represents the number of decimal places, and the
next two bytes in order of increasing significance represent field width
and format type, respectively.  The most-significant byte is not
used and should be set to zero.
</p>
<p>Format types are defined as follows:
</p>
<blockquote><table>
<thead><tr><th>Value</th><th>Meaning</th></tr></thead>
<tr><td>0</td><td>Not used.</td></tr>
<tr><td>1</td><td><code>A</code></td></tr>
<tr><td>2</td><td><code>AHEX</code></td></tr>
<tr><td>3</td><td><code>COMMA</code></td></tr>
<tr><td>4</td><td><code>DOLLAR</code></td></tr>
<tr><td>5</td><td><code>F</code></td></tr>
<tr><td>6</td><td><code>IB</code></td></tr>
<tr><td>7</td><td><code>PIBHEX</code></td></tr>
<tr><td>8</td><td><code>P</code></td></tr>
<tr><td>9</td><td><code>PIB</code></td></tr>
<tr><td>10</td><td><code>PK</code></td></tr>
<tr><td>11</td><td><code>RB</code></td></tr>
<tr><td>12</td><td><code>RBHEX</code></td></tr>
<tr><td>13</td><td>Not used.</td></tr>
<tr><td>14</td><td>Not used.</td></tr>
<tr><td>15</td><td><code>Z</code></td></tr>
<tr><td>16</td><td><code>N</code></td></tr>
<tr><td>17</td><td><code>E</code></td></tr>
<tr><td>18</td><td>Not used.</td></tr>
<tr><td>19</td><td>Not used.</td></tr>
<tr><td>20</td><td><code>DATE</code></td></tr>
<tr><td>21</td><td><code>TIME</code></td></tr>
<tr><td>22</td><td><code>DATETIME</code></td></tr>
<tr><td>23</td><td><code>ADATE</code></td></tr>
<tr><td>24</td><td><code>JDATE</code></td></tr>
<tr><td>25</td><td><code>DTIME</code></td></tr>
<tr><td>26</td><td><code>WKDAY</code></td></tr>
<tr><td>27</td><td><code>MONTH</code></td></tr>
<tr><td>28</td><td><code>MOYR</code></td></tr>
<tr><td>29</td><td><code>QYR</code></td></tr>
<tr><td>30</td><td><code>WKYR</code></td></tr>
<tr><td>31</td><td><code>PCT</code></td></tr>
<tr><td>32</td><td><code>DOT</code></td></tr>
<tr><td>33</td><td><code>CCA</code></td></tr>
<tr><td>34</td><td><code>CCB</code></td></tr>
<tr><td>35</td><td><code>CCC</code></td></tr>
<tr><td>36</td><td><code>CCD</code></td></tr>
<tr><td>37</td><td><code>CCE</code></td></tr>
<tr><td>38</td><td><code>EDATE</code></td></tr>
<tr><td>39</td><td><code>SDATE</code></td></tr>
</table>
</blockquote>

<p>A few system files have been observed in the wild with invalid
<code>write</code> fields, in particular with value 0.  Readers should
probably treat invalid <code>print</code> or <code>write</code> fields as some
default format.
</p>
<hr size="6">
<a name="Value-Labels-Records"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Document-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Value-Labels-Records-1"></a>
<h2 class="section">A.4 Value Labels Records</h2>

<p>The value label records documented in this section are used for
numeric and short string variables only.  Long string variables may
have value labels, but their value labels are recorded using a
different record type (see section <a href="#Long-String-Value-Labels-Record">Long String Value Labels Record</a>).
</p>
<p>The value label record has the following format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">int32               rec_type;
int32               label_count;

/* <span class="roman">Repeated <code>label_cnt</code> times</span>. */
char                value[8];
char                label_len;
char                label[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 3.
</p>
</dd>
<dt> <code>int32 label_count;</code></dt>
<dd><p>Number of value labels present in this record.
</p></dd>
</dl>

<p>The remaining fields are repeated <code>count</code> times.  Each
repetition specifies one value label.
</p>
<dl compact="compact">
<dt> <code>char value[8];</code></dt>
<dd><p>A numeric value or a short string value padded as necessary to 8 bytes
in length.  Its type and width cannot be determined until the
following value label variables record (see below) is read.
</p>
</dd>
<dt> <code>char label_len;</code></dt>
<dd><p>The label&rsquo;s length, in bytes.  The documented maximum length varies
from 60 to 120 based on SPSS version.  PSPP supports value labels up
to 255 bytes long.
</p>
</dd>
<dt> <code>char label[];</code></dt>
<dd><p><code>label_len</code> bytes of the actual label, followed by up to 7 bytes
of padding to bring <code>label</code> and <code>label_len</code> together to a
multiple of 8 bytes in length.
</p></dd>
</dl>

<p>The value label record is always immediately followed by a value label
variables record with the following format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">int32               rec_type;
int32               var_count;
int32               vars[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 4.
</p>
</dd>
<dt> <code>int32 var_count;</code></dt>
<dd><p>Number of variables that the associated value labels from the value
label record are to be applied.
</p>
</dd>
<dt> <code>int32 vars[];</code></dt>
<dd><p>A list of dictionary indexes of variables to which to apply the value
labels (see <a href="#Dictionary-Index">Dictionary Index</a>).  There are <code>var_count</code>
elements.
</p>
<p>String variables wider than 8 bytes may not be specified in this list.
</p></dd>
</dl>

<hr size="6">
<a name="Document-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Value-Labels-Records" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Machine-Integer-Info-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Document-Record-1"></a>
<h2 class="section">A.5 Document Record</h2>

<p>The document record, if present, has the following format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">int32               rec_type;
int32               n_lines;
char                lines[][80];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 6.
</p>
</dd>
<dt> <code>int32 n_lines;</code></dt>
<dd><p>Number of lines of documents present.
</p>
</dd>
<dt> <code>char lines[][80];</code></dt>
<dd><p>Document lines.  The number of elements is defined by <code>n_lines</code>.
Lines shorter than 80 characters are padded on the right with spaces.
</p></dd>
</dl>

<hr size="6">
<a name="Machine-Integer-Info-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Document-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Machine-Floating_002dPoint-Info-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Machine-Integer-Info-Record-1"></a>
<h2 class="section">A.6 Machine Integer Info Record</h2>

<p>The integer info record, if present, has the following format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* <span class="roman">Header.</span> */
int32               rec_type;
int32               subtype;
int32               size;
int32               count;

/* <span class="roman">Data.</span> */
int32               version_major;
int32               version_minor;
int32               version_revision;
int32               machine_code;
int32               floating_point_rep;
int32               compression_code;
int32               endianness;
int32               character_code;
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Always set to 3.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>Size of each piece of data in the data part, in bytes.  Always set to 4.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>Number of pieces of data in the data part.  Always set to 8.
</p>
</dd>
<dt> <code>int32 version_major;</code></dt>
<dd><p>PSPP major version number.  In version <var>x</var>.<var>y</var>.<var>z</var>, this
is <var>x</var>.
</p>
</dd>
<dt> <code>int32 version_minor;</code></dt>
<dd><p>PSPP minor version number.  In version <var>x</var>.<var>y</var>.<var>z</var>, this
is <var>y</var>.
</p>
</dd>
<dt> <code>int32 version_revision;</code></dt>
<dd><p>PSPP version revision number.  In version <var>x</var>.<var>y</var>.<var>z</var>,
this is <var>z</var>.
</p>
</dd>
<dt> <code>int32 machine_code;</code></dt>
<dd><p>Machine code.  PSPP always set this field to value to -1, but other
values may appear.
</p>
</dd>
<dt> <code>int32 floating_point_rep;</code></dt>
<dd><p>Floating point representation code.  For IEEE 754 systems this is 1.
IBM 370 sets this to 2, and DEC VAX E to 3.
</p>
</dd>
<dt> <code>int32 compression_code;</code></dt>
<dd><p>Compression code.  Always set to 1, regardless of whether or how the
file is compressed.
</p>
</dd>
<dt> <code>int32 endianness;</code></dt>
<dd><p>Machine endianness.  1 indicates big-endian, 2 indicates little-endian.
</p>
</dd>
<dt> <code>int32 character_code;</code></dt>
<dd><p><a name="character_002dcode"></a> Character code.  The following values have
been actually observed in system files:
</p>
<dl compact="compact">
<dt> 1</dt>
<dd><p>EBCDIC.
</p>
</dd>
<dt> 2</dt>
<dd><p>7-bit ASCII.
</p>
</dd>
<dt> 1250</dt>
<dd><p>The <code>windows-1250</code> code page for Central European and Eastern
European languages.
</p>
</dd>
<dt> 1252</dt>
<dd><p>The <code>windows-1252</code> code page for Western European languages.
</p>
</dd>
<dt> 28591</dt>
<dd><p>ISO 8859-1.
</p>
</dd>
<dt> 65001</dt>
<dd><p>UTF-8.
</p></dd>
</dl>

<p>The following additional values are known to be defined:
</p>
<dl compact="compact">
<dt> 3</dt>
<dd><p>8-bit &ldquo;ASCII&rdquo;.
</p>
</dd>
<dt> 4</dt>
<dd><p>DEC Kanji.
</p></dd>
</dl>

<p>Other Windows code page numbers are known to be generally valid.
</p>
<p>Old versions of SPSS for Unix and Windows always wrote value 2 in this
field, regardless of the encoding in use.  Newer versions also write
the character encoding as a string (see <a href="#Character-Encoding-Record">Character Encoding Record</a>).
</p></dd>
</dl>

<hr size="6">
<a name="Machine-Floating_002dPoint-Info-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Machine-Integer-Info-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Multiple-Response-Sets-Records" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Machine-Floating_002dPoint-Info-Record-1"></a>
<h2 class="section">A.7 Machine Floating-Point Info Record</h2>

<p>The floating-point info record, if present, has the following format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* <span class="roman">Header.</span> */
int32               rec_type;
int32               subtype;
int32               size;
int32               count;

/* <span class="roman">Data.</span> */
flt64               sysmis;
flt64               highest;
flt64               lowest;
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Always set to 4.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>Size of each piece of data in the data part, in bytes.  Always set to 8.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>Number of pieces of data in the data part.  Always set to 3.
</p>
</dd>
<dt> <code>flt64 sysmis;</code></dt>
<dt> <code>flt64 highest;</code></dt>
<dt> <code>flt64 lowest;</code></dt>
<dd><p>The system missing value, the value used for HIGHEST in missing
values, and the value used for LOWEST in missing values, respectively.
See section <a href="#System-File-Format">System File Format</a>, for more information.
</p>
<p>The SPSSWriter library in PHP, which identifies itself as <code>FOM
SPSS 1.0.0</code> in the file header record <code>prod_name</code> field, writes
unexpected values to these fields, but it uses the same values
consistently throughout the rest of the file.
</p></dd>
</dl>

<hr size="6">
<a name="Multiple-Response-Sets-Records"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Machine-Floating_002dPoint-Info-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Extra-Product-Info-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Multiple-Response-Sets-Records-1"></a>
<h2 class="section">A.8 Multiple Response Sets Records</h2>

<p>The system file format has two different types of records that
represent multiple response sets (see <a href="pspp.html#MRSETS">(pspp)MRSETS</a> section &lsquo;MRSETS&rsquo; in <cite>PSPP Users Guide</cite>).  The first type of record describes multiple response sets
that can be understood by SPSS before version 14.  The second type of
record, with a closely related format, is used for multiple dichotomy
sets that use the CATEGORYLABELS=COUNTEDVALUES feature added in
version 14.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* <span class="roman">Header.</span> */
int32               rec_type;
int32               subtype;
int32               size;
int32               count;

/* <span class="roman">Exactly <code>count</code> bytes of data.</span> */
char                mrsets[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Set to 7 for records that describe multiple response
sets understood by SPSS before version 14, or to 19 for records that
describe dichotomy sets that use the CATEGORYLABELS=COUNTEDVALUES
feature added in version 14.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>The size of each element in the <code>mrsets</code> member. Always set to 1.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>The total number of bytes in <code>mrsets</code>.
</p>
</dd>
<dt> <code>char mrsets[];</code></dt>
<dd><p>Zero or more line feeds (byte 0x0a), followed by a series of multiple
response sets, each of which consists of the following:
</p>
<ul>
<li>
The set&rsquo;s name (an identifier that begins with &lsquo;<samp>$</samp>&rsquo;), in mixed
upper and lower case.

</li><li>
An equals sign (&lsquo;<samp>=</samp>&rsquo;).

</li><li>
&lsquo;<samp>C</samp>&rsquo; for a multiple category set, &lsquo;<samp>D</samp>&rsquo; for a multiple
dichotomy set with CATEGORYLABELS=VARLABELS, or &lsquo;<samp>E</samp>&rsquo; for a
multiple dichotomy set with CATEGORYLABELS=COUNTEDVALUES.

</li><li>
For a multiple dichotomy set with CATEGORYLABELS=COUNTEDVALUES, a
space, followed by a number expressed as decimal digits, followed by a
space.  If LABELSOURCE=VARLABEL was specified on MRSETS, then the
number is 11; otherwise it is 1.<a name="DOCF1" href="#FOOT1">(1)</a>

</li><li>
For either kind of multiple dichotomy set, the counted value, as a
positive integer count specified as decimal digits, followed by a
space, followed by as many string bytes as specified in the count.  If
the set contains numeric variables, the string consists of the counted
integer value expressed as decimal digits.  If the set contains string
variables, the string contains the counted string value.  Either way,
the string may be padded on the right with spaces (older versions of
SPSS seem to always pad to a width of 8 bytes; newer versions don&rsquo;t).

</li><li>
A space.

</li><li>
The multiple response set&rsquo;s label, using the same format as for the
counted value for multiple dichotomy sets.  A string of length 0 means
that the set does not have a label.  A string of length 0 is also
written if LABELSOURCE=VARLABEL was specified.

</li><li>
A space.

</li><li>
The short names of the variables in the set, converted to lowercase,
each separated from the previous by a single space.

<p>Even though a multiple response set must have at least two variables,
some system files contain multiple response sets with no variables or
one variable.  The source and meaning of these multiple response sets is
unknown.  (Perhaps they arise from creating a multiple response set
then deleting all the variables that it contains?)
</p>
</li><li>
One line feed (byte 0x0a).  Sometimes multiple, even hundreds, of line
feeds are present.
</li></ul>
</dd>
</dl>

<p>Example: Given appropriate variable definitions, consider the
following MRSETS command:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">MRSETS /MCGROUP NAME=$a LABEL='my mcgroup' VARIABLES=a b c
       /MDGROUP NAME=$b VARIABLES=g e f d VALUE=55
       /MDGROUP NAME=$c LABEL='mdgroup #2' VARIABLES=h i j VALUE='Yes'
       /MDGROUP NAME=$d LABEL='third mdgroup' CATEGORYLABELS=COUNTEDVALUES
        VARIABLES=k l m VALUE=34
       /MDGROUP NAME=$e CATEGORYLABELS=COUNTEDVALUES LABELSOURCE=VARLABEL
        VARIABLES=n o p VALUE='choice'.
</pre></td></tr></table>

<p>The above would generate the following multiple response set record of
subtype 7:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">$a=C 10 my mcgroup a b c
$b=D2 55 0  g e f d
$c=D3 Yes 10 mdgroup #2 h i j
</pre></td></tr></table>

<p>It would also generate the following multiple response set record with
subtype 19:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">$d=E 1 2 34 13 third mdgroup k l m
$e=E 11 6 choice 0  n o p
</pre></td></tr></table>

<hr size="6">
<a name="Extra-Product-Info-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Multiple-Response-Sets-Records" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Display-Parameter-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Extra-Product-Info-Record-1"></a>
<h2 class="section">A.9 Extra Product Info Record</h2>

<p>This optional record appears to contain a text string that describes
the program that wrote the file and the source of the data.  (This is
redundant with the file label and product info found in the file
header record.)
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* <span class="roman">Header.</span> */
int32               rec_type;
int32               subtype;
int32               size;
int32               count;

/* <span class="roman">Exactly <code>count</code> bytes of data.</span> */
char                info[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Always set to 10.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>The size of each element in the <code>info</code> member. Always set to 1.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>The total number of bytes in <code>info</code>.
</p>
</dd>
<dt> <code>char info[];</code></dt>
<dd><p>A text string.  A product that identifies itself as <code>VOXCO
INTERVIEWER 4.3</code> uses CR-only line ends in this field, rather than the
more usual LF-only or CR LF line ends.
</p></dd>
</dl>

<hr size="6">
<a name="Variable-Display-Parameter-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Extra-Product-Info-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Long-Variable-Names-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Display-Parameter-Record-1"></a>
<h2 class="section">A.10 Variable Display Parameter Record</h2>

<p>The variable display parameter record, if present, has the following
format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* <span class="roman">Header.</span> */
int32               rec_type;
int32               subtype;
int32               size;
int32               count;

/* <span class="roman">Repeated <code>count</code> times</span>. */
int32               measure;
int32               width;           /* <span class="roman">Not always present.</span> */
int32               alignment;
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Always set to 11.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>The size of <code>int32</code>.  Always set to 4.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>The number of sets of variable display parameters (ordinarily the
number of variables in the dictionary), times 2 or 3.
</p></dd>
</dl>

<p>The remaining members are repeated <code>count</code> times, in the same
order as the variable records.  No element corresponds to variable
records that continue long string variables.  The meanings of these
members are as follows:
</p>
<dl compact="compact">
<dt> <code>int32 measure;</code></dt>
<dd><p>The measurement type of the variable:
</p><dl compact="compact">
<dt> 1</dt>
<dd><p>Nominal Scale
</p></dd>
<dt> 2</dt>
<dd><p>Ordinal Scale
</p></dd>
<dt> 3</dt>
<dd><p>Continuous Scale
</p></dd>
</dl>

<p>SPSS sometimes writes a <code>measure</code> of 0.  PSPP interprets this as
nominal scale.
</p>
</dd>
<dt> <code>int32 width;</code></dt>
<dd><p>The width of the display column for the variable in characters.
</p>
<p>This field is present if <var>count</var> is 3 times the number of
variables in the dictionary.  It is omitted if <var>count</var> is 2 times
the number of variables.
</p>
</dd>
<dt> <code>int32 alignment;</code></dt>
<dd><p>The alignment of the variable for display purposes:
</p>
<dl compact="compact">
<dt> 0</dt>
<dd><p>Left aligned
</p></dd>
<dt> 1</dt>
<dd><p>Right aligned
</p></dd>
<dt> 2</dt>
<dd><p>Centre aligned
</p></dd>
</dl>
</dd>
</dl>

<hr size="6">
<a name="Long-Variable-Names-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Display-Parameter-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Very-Long-String-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Long-Variable-Names-Record-1"></a>
<h2 class="section">A.11 Long Variable Names Record</h2>

<p>If present, the long variable names record has the following format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* <span class="roman">Header.</span> */
int32               rec_type;
int32               subtype;
int32               size;
int32               count;

/* <span class="roman">Exactly <code>count</code> bytes of data.</span> */
char                var_name_pairs[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Always set to 13.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>The size of each element in the <code>var_name_pairs</code> member. Always set to 1.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>The total number of bytes in <code>var_name_pairs</code>.
</p>
</dd>
<dt> <code>char var_name_pairs[];</code></dt>
<dd><p>A list of <var>key</var>&ndash;<var>value</var> tuples, where <var>key</var> is the name
of a variable, and <var>value</var> is its long variable name.
The <var>key</var> field is at most 8 bytes long and must match the
name of a variable which appears in the variable record (see section <a href="#Variable-Record">Variable Record</a>).
The <var>value</var> field is at most 64 bytes long.
The <var>key</var> and <var>value</var> fields are separated by a &lsquo;<samp>=</samp>&rsquo; byte.
Each tuple is separated by a byte whose value is 09.  There is no
trailing separator following the last tuple.
The total length is <code>count</code> bytes.
</p></dd>
</dl>

<hr size="6">
<a name="Very-Long-String-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Long-Variable-Names-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Character-Encoding-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Very-Long-String-Record-1"></a>
<h2 class="section">A.12 Very Long String Record</h2>

<p>Old versions of SPSS limited string variables to a width of 255 bytes.
For backward compatibility with these older versions, the system file
format represents a string longer than 255 bytes, called a <em>very
long string</em>, as a collection of strings no longer than 255 bytes
each.  The strings concatenated to make a very long string are called
its <em>segments</em>; for consistency, variables other than very long
strings are considered to have a single segment.
</p>
<p>A very long string with a width of <var>w</var> has <var>n</var> =
(<var>w</var> + 251) / 252 segments, that is, one segment for every
252 bytes of width, rounding up.  It would be logical, then, for each
of the segments except the last to have a width of 252 and the last
segment to have the remainder, but this is not the case.  In fact,
each segment except the last has a width of 255 bytes.  The last
segment has width <var>w</var> - (<var>n</var> - 1) * 252; some versions
of SPSS make it slightly wider, but not wide enough to make the last
segment require another 8 bytes of data.
</p>
<p>Data is packed tightly into segments of a very long string, 255 bytes
per segment.  Because 255 bytes of segment data are allocated for
every 252 bytes of the very long string&rsquo;s width (approximately), some
unused space is left over at the end of the allocated segments.  Data
in unused space is ignored.
</p>
<p>Example: Consider a very long string of width 20,000.  Such a very
long string has 20,000 / 252 = 80 (rounding up) segments.  The first
79 segments have width 255; the last segment has width 20,000 - 79 *
252 = 92 or slightly wider (up to 96 bytes, the next multiple of 8).
The very long string&rsquo;s data is actually stored in the 19,890 bytes in
the first 78 segments, plus the first 110 bytes of the 79th segment
(19,890 + 110 = 20,000).  The remaining 145 bytes of the 79th segment
and all 92 bytes of the 80th segment are unused.
</p>
<p>The very long string record explains how to stitch together segments
to obtain very long string data.  For each of the very long string
variables in the dictionary, it specifies the name of its first
segment&rsquo;s variable and the very long string variable&rsquo;s actual width.
The remaining segments immediately follow the named variable in the
system file&rsquo;s dictionary.
</p>
<p>The very long string record, which is present only if the system file
contains very long string variables, has the following format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* <span class="roman">Header.</span> */
int32               rec_type;
int32               subtype;
int32               size;
int32               count;

/* <span class="roman">Exactly <code>count</code> bytes of data.</span> */
char                string_lengths[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Always set to 14.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>The size of each element in the <code>string_lengths</code> member. Always set to 1.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>The total number of bytes in <code>string_lengths</code>.
</p>
</dd>
<dt> <code>char string_lengths[];</code></dt>
<dd><p>A list of <var>key</var>&ndash;<var>value</var> tuples, where <var>key</var> is the name
of a variable, and <var>value</var> is its length.
The <var>key</var> field is at most 8 bytes long and must match the
name of a variable which appears in the variable record (see section <a href="#Variable-Record">Variable Record</a>).
The <var>value</var> field is exactly 5 bytes long. It is a zero-padded,
ASCII-encoded string that is the length of the variable.
The <var>key</var> and <var>value</var> fields are separated by a &lsquo;<samp>=</samp>&rsquo; byte.
Tuples are delimited by a two-byte sequence {00, 09}.
After the last tuple, there may be a single byte 00, or {00, 09}.
The total length is <code>count</code> bytes.
</p></dd>
</dl>

<hr size="6">
<a name="Character-Encoding-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Very-Long-String-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Long-String-Value-Labels-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Character-Encoding-Record-1"></a>
<h2 class="section">A.13 Character Encoding Record</h2>

<p>This record, if present, indicates the character encoding for string data,
long variable names, variable labels, value labels and other strings in the
file.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* <span class="roman">Header.</span> */
int32               rec_type;
int32               subtype;
int32               size;
int32               count;

/* <span class="roman">Exactly <code>count</code> bytes of data.</span> */
char                encoding[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Always set to 20.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>The size of each element in the <code>encoding</code> member. Always set to 1.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>The total number of bytes in <code>encoding</code>.
</p>
</dd>
<dt> <code>char encoding[];</code></dt>
<dd><p>The name of the character encoding.  Normally this will be an official
IANA character set name or alias.
See <a href="http://www.iana.org/assignments/character-sets">http://www.iana.org/assignments/character-sets</a>.
Character set names are not case-sensitive, but SPSS appears to write
them in all-uppercase.
</p></dd>
</dl>

<p>This record is not present in files generated by older software.  See
also the <code>character_code</code> field in the machine integer info
record (see <a href="#character_002dcode">character-code</a>).
</p>
<p>When the character encoding record and the machine integer info record
are both present, all system files observed in practice indicate the
same character encoding, e.g. 1252 as <code>character_code</code> and
<code>windows-1252</code> as <code>encoding</code>, 65001 and <code>UTF-8</code>, etc.
</p>
<p>If, for testing purposes, a file is crafted with different
<code>character_code</code> and <code>encoding</code>, it seems that
<code>character_code</code> controls the encoding for all strings in the
system file before the dictionary termination record, including
strings in data (e.g. string missing values), and <code>encoding</code>
controls the encoding for strings following the dictionary termination
record.
</p>
<hr size="6">
<a name="Long-String-Value-Labels-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Character-Encoding-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Long-String-Missing-Values-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Long-String-Value-Labels-Record-1"></a>
<h2 class="section">A.14 Long String Value Labels Record</h2>

<p>This record, if present, specifies value labels for long string
variables.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* <span class="roman">Header.</span> */
int32               rec_type;
int32               subtype;
int32               size;
int32               count;

/* <span class="roman">Repeated up to exactly <code>count</code> bytes.</span> */
int32               var_name_len;
char                var_name[];
int32               var_width;
int32               n_labels;
long_string_label   labels[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Always set to 21.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>Always set to 1.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>The number of bytes following the header until the next header.
</p>
</dd>
<dt> <code>int32 var_name_len;</code></dt>
<dt> <code>char var_name[];</code></dt>
<dd><p>The number of bytes in the name of the variable that has long string
value labels, plus the variable name itself, which consists of exactly
<code>var_name_len</code> bytes.  The variable name is not padded to any
particular boundary, nor is it null-terminated.
</p>
</dd>
<dt> <code>int32 var_width;</code></dt>
<dd><p>The width of the variable, in bytes, which will be between 9 and
32767.
</p>
</dd>
<dt> <code>int32 n_labels;</code></dt>
<dt> <code>long_string_label labels[];</code></dt>
<dd><p>The long string labels themselves.  The <code>labels</code> array contains
exactly <code>n_labels</code> elements, each of which has the following
substructure:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">int32               value_len;
char                value[];
int32               label_len;
char                label[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 value_len;</code></dt>
<dt> <code>char value[];</code></dt>
<dd><p>The string value being labeled.  <code>value_len</code> is the number of
bytes in <code>value</code>; it is equal to <code>var_width</code>.  The
<code>value</code> array is not padded or null-terminated.
</p>
</dd>
<dt> <code>int32 label_len;</code></dt>
<dt> <code>char label[];</code></dt>
<dd><p>The label for the string value.  <code>label_len</code>, which must be
between 0 and 120, is the number of bytes in <code>label</code>.  The
<code>label</code> array is not padded or null-terminated.
</p></dd>
</dl>
</dd>
</dl>

<hr size="6">
<a name="Long-String-Missing-Values-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Long-String-Value-Labels-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Data-File-and-Variable-Attributes-Records" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Long-String-Missing-Values-Record-1"></a>
<h2 class="section">A.15 Long String Missing Values Record</h2>

<p>This record, if present, specifies missing values for long string
variables.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* <span class="roman">Header.</span> */
int32               rec_type;
int32               subtype;
int32               size;
int32               count;

/* <span class="roman">Repeated up to exactly <code>count</code> bytes.</span> */
int32               var_name_len;
char                var_name[];
char                n_missing_values;
long_string_missing_value   values[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Always set to 22.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>Always set to 1.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>The number of bytes following the header until the next header.
</p>
</dd>
<dt> <code>int32 var_name_len;</code></dt>
<dt> <code>char var_name[];</code></dt>
<dd><p>The number of bytes in the name of the long string variable that has
missing values, plus the variable name itself, which consists of
exactly <code>var_name_len</code> bytes.  The variable name is not padded to
any particular boundary, nor is it null-terminated.
</p>
</dd>
<dt> <code>char n_missing_values;</code></dt>
<dd><p>The number of missing values, either 1, 2, or 3.  (This is, unusually,
a single byte instead of a 32-bit number.)
</p>
</dd>
<dt> <code>long_string_missing_value values[];</code></dt>
<dd><p>The missing values themselves.  This array contains exactly
<code>n_missing_values</code> elements, each of which has the following
substructure:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">int32               value_len;
char                value[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 value_len;</code></dt>
<dd><p>The length of the missing value string, in bytes.  This value should
be 8, because long string variables are at least 8 bytes wide (by
definition), only the first 8 bytes of a long string variable&rsquo;s
missing values are allowed to be non-spaces, and any spaces within the
first 8 bytes are included in the missing value here.
</p>
</dd>
<dt> <code>char value[];</code></dt>
<dd><p>The missing value string, exactly <code>value_len</code> bytes, without
any padding or null terminator.
</p></dd>
</dl>
</dd>
</dl>

<hr size="6">
<a name="Data-File-and-Variable-Attributes-Records"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Long-String-Missing-Values-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Roles" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Data-File-and-Variable-Attributes-Records-1"></a>
<h2 class="section">A.16 Data File and Variable Attributes Records</h2>

<p>The data file and variable attributes records represent custom
attributes for the system file or for individual variables in the
system file, as defined on the DATAFILE ATTRIBUTE (see <a href="pspp.html#DATAFILE-ATTRIBUTE">(pspp)DATAFILE ATTRIBUTE</a> section &lsquo;DATAFILE ATTRIBUTE&rsquo; in <cite>PSPP Users Guide</cite>) and VARIABLE ATTRIBUTE commands
(see <a href="pspp.html#VARIABLE-ATTRIBUTE">(pspp)VARIABLE ATTRIBUTE</a> section &lsquo;VARIABLE ATTRIBUTE&rsquo; in <cite>PSPP Users Guide</cite>), respectively.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* <span class="roman">Header.</span> */
int32               rec_type;
int32               subtype;
int32               size;
int32               count;

/* <span class="roman">Exactly <code>count</code> bytes of data.</span> */
char                attributes[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Always set to 17 for a data file attribute record or
to 18 for a variable attributes record.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>The size of each element in the <code>attributes</code> member. Always set to 1.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>The total number of bytes in <code>attributes</code>.
</p>
</dd>
<dt> <code>char attributes[];</code></dt>
<dd><p>The attributes, in a text-based format.
</p>
<p>In record subtype 17, this field contains a single attribute set.  An
attribute set is a sequence of one or more attributes concatenated
together.  Each attribute consists of a name, which has the same
syntax as a variable name, followed by, inside parentheses, a sequence
of one or more values.  Each value consists of a string enclosed in
single quotes (<code>'</code>) followed by a line feed (byte 0x0a).  A value
may contain single quote characters, which are not themselves escaped
or quoted or required to be present in pairs.  There is no apparent
way to embed a line feed in a value.  There is no distinction between
an attribute with a single value and an attribute array with one
element.
</p>
<p>In record subtype 18, this field contains a sequence of one or more
variable attribute sets.  If more than one variable attribute set is
present, each one after the first is delimited from the previous by
<code>/</code>.  Each variable attribute set consists of a long
variable name,
followed by <code>:</code>, followed by an attribute set with the same
syntax as on record subtype 17.
</p>
<p>System files written by <code>Stata 14.1/-savespss- 1.77 by
S.Radyakin</code> may include multiple records with subtype 18, one per
variable that has variable attributes.
</p>
<p>The total length is <code>count</code> bytes.
</p></dd>
</dl>

<a name="Example"></a>
<h3 class="subheading">Example</h3>

<p>A system file produced with the following VARIABLE ATTRIBUTE commands
in effect:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">VARIABLE ATTRIBUTE VARIABLES=dummy ATTRIBUTE=fred[1]('23') fred[2]('34').
VARIABLE ATTRIBUTE VARIABLES=dummy ATTRIBUTE=bert('123').
</pre></td></tr></table>

<p>will contain a variable attribute record with the following contents:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">0000  07 00 00 00 12 00 00 00  01 00 00 00 22 00 00 00  |............&quot;...|
0010  64 75 6d 6d 79 3a 66 72  65 64 28 27 32 33 27 0a  |dummy:fred('23'.|
0020  27 33 34 27 0a 29 62 65  72 74 28 27 31 32 33 27  |'34'.)bert('123'|
0030  0a 29                                             |.)              |
</pre></td></tr></table>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Variable-Roles">A.16.1 Variable Roles</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Variable-Roles"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Data-File-and-Variable-Attributes-Records" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Extended-Number-of-Cases-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Data-File-and-Variable-Attributes-Records" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Roles-1"></a>
<h3 class="subsection">A.16.1 Variable Roles</h3>

<p>A variable&rsquo;s role is represented as an attribute named <code>$@Role</code>.
This attribute has a single element whose values and their meanings
are:
</p>
<dl compact="compact">
<dt> <code>0</code></dt>
<dd><p>Input.  This, the default, is the most common role.
</p></dd>
<dt> <code>1</code></dt>
<dd><p>Output.
</p></dd>
<dt> <code>2</code></dt>
<dd><p>Both.
</p></dd>
<dt> <code>3</code></dt>
<dd><p>None.
</p></dd>
<dt> <code>4</code></dt>
<dd><p>Partition.
</p></dd>
<dt> <code>5</code></dt>
<dd><p>Split.
</p></dd>
</dl>

<hr size="6">
<a name="Extended-Number-of-Cases-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Roles" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Informational-Records" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Extended-Number-of-Cases-Record-1"></a>
<h2 class="section">A.17 Extended Number of Cases Record</h2>

<p>The file header record expresses the number of cases in the system
file as an int32 (see section <a href="#File-Header-Record">File Header Record</a>).  This record allows the
number of cases in the system file to be expressed as a 64-bit number.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">int32               rec_type;
int32               subtype;
int32               size;
int32               count;
int64               unknown;
int64               ncases64;
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Always set to 16.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>Size of each element.  Always set to 8.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>Number of pieces of data in the data part.  Alway set to 2.
</p>
</dd>
<dt> <code>int64 unknown;</code></dt>
<dd><p>Meaning unknown.  Always set to 1.
</p>
</dd>
<dt> <code>int64 ncases64;</code></dt>
<dd><p>Number of cases in the file as a 64-bit integer.  Presumably this
could be -1 to indicate that the number of cases is unknown, for the
same reason as <code>ncases</code> in the file header record, but this has
not been observed in the wild.
</p></dd>
</dl>

<hr size="6">
<a name="Other-Informational-Records"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Extended-Number-of-Cases-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Termination-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Other-Informational-Records-1"></a>
<h2 class="section">A.18 Other Informational Records</h2>

<p>This chapter documents many specific types of extension records are
documented here, but others are known to exist.  PSPP ignores unknown
extension records when reading system files.
</p>
<p>The following extension record subtypes have also been observed, with
the following believed meanings:
</p>
<dl compact="compact">
<dt> 5</dt>
<dd><p>A set of grouped variables (according to Aapi H&auml;m&auml;l&auml;inen).
</p>
</dd>
<dt> 6</dt>
<dd><p>Date info, probably related to USE (according to Aapi H&auml;m&auml;l&auml;inen).
</p>
</dd>
<dt> 12</dt>
<dd><p>A UUID in the format described in RFC 4122.  Only two examples
observed, both written by SPSS 13, and in each case the UUID contained
both upper and lower case.
</p>
</dd>
<dt> 24</dt>
<dd><p>XML that describes how data in the file should be displayed on-screen.
</p></dd>
</dl>

<hr size="6">
<a name="Dictionary-Termination-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Other-Informational-Records" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Data-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Dictionary-Termination-Record-1"></a>
<h2 class="section">A.19 Dictionary Termination Record</h2>

<p>The dictionary termination record separates all other records from the
data records.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">int32               rec_type;
int32               filler;
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 999.
</p>
</dd>
<dt> <code>int32 filler;</code></dt>
<dd><p>Ignored padding.  Should be set to 0.
</p></dd>
</dl>

<hr size="6">
<hr size="6">
<a name="SEC_Foot"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1>Footnotes</h1>
<h3><a name="FOOT1" href="#DOCF1">(1)</a></h3>
<p>This part of the format may
not be fully understood, because only a single example of each
possibility has been examined.
</p><hr size="1">
<a name="SEC_About"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#System-File-Format" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1>About This Document</h1>
<p>
  This document was generated by <em>Joran Jessurun</em> on <em>December 5, 2016</em> using <a href="http://www.nongnu.org/texi2html/"><em>texi2html 1.82</em></a>.
</p>
<p>
  The buttons in the navigation panels have the following meaning:
</p>
<table border="1">
  <tr>
    <th> Button </th>
    <th> Name </th>
    <th> Go to </th>
    <th> From 1.2.3 go to</th>
  </tr>
  <tr>
    <td align="center"> [ &lt; ] </td>
    <td align="center">Back</td>
    <td>Previous section in reading order</td>
    <td>1.2.2</td>
  </tr>
  <tr>
    <td align="center"> [ &gt; ] </td>
    <td align="center">Forward</td>
    <td>Next section in reading order</td>
    <td>1.2.4</td>
  </tr>
  <tr>
    <td align="center"> [ &lt;&lt; ] </td>
    <td align="center">FastBack</td>
    <td>Beginning of this chapter or previous chapter</td>
    <td>1</td>
  </tr>
  <tr>
    <td align="center"> [ Up ] </td>
    <td align="center">Up</td>
    <td>Up section</td>
    <td>1.2</td>
  </tr>
  <tr>
    <td align="center"> [ &gt;&gt; ] </td>
    <td align="center">FastForward</td>
    <td>Next chapter</td>
    <td>2</td>
  </tr>
  <tr>
    <td align="center"> [Top] </td>
    <td align="center">Top</td>
    <td>Cover (top) of document</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [Contents] </td>
    <td align="center">Contents</td>
    <td>Table of contents</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [Index] </td>
    <td align="center">Index</td>
    <td>Index</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [ ? ] </td>
    <td align="center">About</td>
    <td>About (help)</td>
    <td> &nbsp; </td>
  </tr>
</table>

<p>
  where the <strong> Example </strong> assumes that the current position is at <strong> Subsubsection One-Two-Three </strong> of a document of the following structure:
</p>

<ul>
  <li> 1. Section One
    <ul>
      <li>1.1 Subsection One-One
        <ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.2 Subsection One-Two
        <ul>
          <li>1.2.1 Subsubsection One-Two-One</li>
          <li>1.2.2 Subsubsection One-Two-Two</li>
          <li>1.2.3 Subsubsection One-Two-Three &nbsp; &nbsp;
            <strong>&lt;== Current Position </strong></li>
          <li>1.2.4 Subsubsection One-Two-Four</li>
        </ul>
      </li>
      <li>1.3 Subsection One-Three
        <ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.4 Subsection One-Four</li>
    </ul>
  </li>
</ul>

<hr size="1">
<p>
 <font size="-1">
  This document was generated by <em>Joran Jessurun</em> on <em>December 5, 2016</em> using <a href="http://www.nongnu.org/texi2html/"><em>texi2html 1.82</em></a>.
 </font>
 <br>

</p>
</body>
</html>
